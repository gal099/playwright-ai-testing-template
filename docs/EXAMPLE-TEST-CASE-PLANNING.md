# Example: Test Case Planning Output

This is an example of the documentation generated by the Test Case Planner feature.

**Command used:**
```bash
npm run ai:plan-tests http://localhost:3000/login login
```

**Output file:** `docs/LOGIN-TEST-CASES.md`

---

# Login Screen - Test Cases

Auto-generated from screenshot analysis on 2026-01-13

## Test Scenarios Identified

### Scenario 1: User Authentication
- Login with valid credentials
- Login with invalid credentials
- Login with empty fields
- Account lockout after multiple failed attempts

### Scenario 2: Password Management
- Reset password flow
- Show/hide password toggle
- Remember me functionality

### Scenario 3: Alternative Login Methods
- Social login (Google, Facebook, etc.)
- Single Sign-On (SSO)

### Scenario 4: Account Actions
- Create new account link
- Forgot password link

---

## Test Cases

### TC-LG-001: Login with valid credentials (P1 - Alta)

**Priority:** P1 (Critical Path)
**Type:** Functional
**Estimated Effort:** Low

**Preconditions:**
- User has valid account credentials (email and password)
- Application is accessible and login page loads correctly
- Database is available and contains user account

**Steps:**
1. Navigate to login page (e.g., http://localhost:3000/login)
2. Enter valid email address in email field
3. Enter valid password in password field
4. Click "Login" or "Sign In" button

**Expected Result:**
- User is successfully authenticated
- User is redirected to dashboard or home page
- Welcome message displays user's name
- Session is created and stored
- Login page is no longer accessible without logout

**Notes:**
- **Critical path test - MUST be automated (P1)**
- This is the most important test for the entire application
- Should be included in smoke test suite
- Test with different valid user accounts (admin, regular user, etc.)
- Consider testing session persistence across page refreshes

---

### TC-LG-002: Login with invalid password (P1 - Alta)

**Priority:** P1 (Critical Path)
**Type:** Negative Testing
**Estimated Effort:** Low

**Preconditions:**
- User account exists in database
- User knows valid email but will enter wrong password
- Application is accessible

**Steps:**
1. Navigate to login page
2. Enter valid email address
3. Enter INVALID password (wrong password)
4. Click "Login" button

**Expected Result:**
- Login fails
- Error message is displayed: "Invalid email or password" or similar
- User remains on login page
- Password field is cleared for security
- Email field retains the entered value
- No session is created
- Login attempt may be logged for security

**Notes:**
- **Critical error handling - MUST be automated (P1)**
- Verify error message is user-friendly and doesn't reveal which field is wrong
- Test multiple invalid password attempts
- Related to TC-LG-004 (account lockout)

---

### TC-LG-003: Login with empty fields (P1 - Alta)

**Priority:** P1 (Critical Path)
**Type:** Negative Testing / Validation
**Estimated Effort:** Low

**Preconditions:**
- User is on login page
- Form fields are empty

**Steps:**
1. Navigate to login page
2. Leave email field empty
3. Leave password field empty
4. Click "Login" button

**Expected Result:**
- Form validation triggers
- Error messages display for required fields:
  - "Email is required" or similar
  - "Password is required" or similar
- Submit button may be disabled until fields are filled
- No API call is made to backend
- User remains on login page

**Notes:**
- **Critical validation - MUST be automated (P1)**
- Test variations:
  - Only email empty
  - Only password empty
  - Both empty (this test case)
- Verify client-side validation works before server-side

---

### TC-LG-004: Account lockout after failed attempts (P1 - Alta)

**Priority:** P1 (Critical Path)
**Type:** Security / Negative Testing
**Estimated Effort:** Medium

**Preconditions:**
- User account exists in database
- Account is not currently locked
- System has lockout policy (e.g., 5 failed attempts)

**Steps:**
1. Navigate to login page
2. Enter valid email
3. Enter invalid password
4. Click "Login" button
5. Repeat steps 2-4 until lockout threshold is reached (e.g., 5 times)
6. Attempt to login with VALID credentials

**Expected Result:**
- After threshold is reached (e.g., 5 failed attempts):
  - Account is temporarily locked
  - Error message: "Account locked due to multiple failed attempts. Try again in X minutes" or similar
  - Login is prevented even with valid credentials
  - Lockout duration starts (e.g., 15 minutes)
- Security event is logged
- Optional: User receives email notification about lockout

**Notes:**
- **Critical security feature - MUST be automated (P1)**
- Verify lockout timeout works correctly
- Test that account unlocks after timeout period
- Consider testing permanent lockout after multiple lockout periods
- May require database cleanup between test runs

---

### TC-LG-005: Invalid email format (P2 - Media)

**Priority:** P2 (Important UX)
**Type:** Validation
**Estimated Effort:** Low

**Preconditions:**
- User is on login page

**Steps:**
1. Navigate to login page
2. Enter invalid email format (e.g., "notanemail", "missing@dot", "test@", etc.)
3. Enter any password
4. Click "Login" button (or observe validation on blur)

**Expected Result:**
- Client-side validation triggers
- Error message: "Please enter a valid email address" or similar
- Submit may be blocked until valid format is entered
- No API call is made to backend
- Email field is highlighted or marked as invalid

**Notes:**
- **Important UX validation - Consider automating (P2)**
- Test multiple invalid formats:
  - No @ symbol
  - Multiple @ symbols
  - Missing domain
  - Invalid characters
- May be implemented as real-time validation (on blur) or on submit

---

### TC-LG-006: Password visibility toggle (P2 - Media)

**Priority:** P2 (Important UX)
**Type:** UI/UX Testing
**Estimated Effort:** Low

**Preconditions:**
- User is on login page
- Password field has "show/hide password" icon/button

**Steps:**
1. Navigate to login page
2. Enter password in password field (observe it's masked: ••••)
3. Click "Show password" icon (usually an eye icon)
4. Observe password is now visible in plain text
5. Click "Hide password" icon
6. Observe password is masked again

**Expected Result:**
- Password visibility toggles correctly
- When hidden: password shows as bullets/asterisks (••••)
- When visible: password shows in plain text
- Icon changes between "show" (eye) and "hide" (eye with slash) states
- Functionality works on multiple password entries
- Password value in field doesn't change, only visibility

**Notes:**
- **UX feature - Consider automating if time permits (P2)**
- Accessibility: ensure toggle is keyboard accessible
- Security consideration: password visibility resets to hidden on page load
- Common implementation: toggle input type between "password" and "text"

---

### TC-LG-007: Remember me functionality (P2 - Media)

**Priority:** P2 (Important UX)
**Type:** Functional
**Estimated Effort:** Medium

**Preconditions:**
- User has valid credentials
- "Remember me" checkbox exists on login form
- Browser allows cookies/local storage

**Steps:**
1. Navigate to login page
2. Enter valid email
3. Enter valid password
4. Check "Remember me" checkbox
5. Click "Login" button
6. Verify successful login and redirect to dashboard
7. Close browser completely
8. Reopen browser and navigate to application

**Expected Result:**
- After step 5: User is logged in successfully
- After step 8:
  - User is still logged in (session persists)
  - OR email is pre-filled in login form (depends on implementation)
- Session cookie/token has extended expiration
- User doesn't need to re-enter credentials

**Notes:**
- **UX feature - Document but don't automate (P2)**
- Requires browser automation with cookie/storage persistence
- Test opposite: login WITHOUT "Remember me" and verify session expires
- Security consideration: implement secure token storage
- May be complex to automate due to browser state management

---

### TC-LG-008: Forgot password link (P3 - Baja)

**Priority:** P3 (Low Priority)
**Type:** Functional / Navigation
**Estimated Effort:** Low

**Preconditions:**
- "Forgot password" link exists on login page
- Password reset flow is implemented

**Steps:**
1. Navigate to login page
2. Locate and click "Forgot password" or "Reset password" link

**Expected Result:**
- User is redirected to password reset page
- Password reset page loads correctly
- URL changes to /reset-password or similar
- Reset flow can be initiated (usually by entering email)

**Notes:**
- **Low priority - Document but don't automate (P3)**
- This test only verifies the link works
- Full password reset flow should have separate test cases
- Consider as part of smoke test for navigation
- Low risk: if broken, users will report immediately

---

### TC-LG-009: Create account link (P3 - Baja)

**Priority:** P3 (Low Priority)
**Type:** Functional / Navigation
**Estimated Effort:** Low

**Preconditions:**
- "Create account" or "Sign up" link exists on login page
- Registration flow is implemented

**Steps:**
1. Navigate to login page
2. Locate and click "Create account" or "Sign up" link

**Expected Result:**
- User is redirected to registration/signup page
- Registration page loads correctly
- URL changes to /register, /signup, or similar
- Registration form is displayed

**Notes:**
- **Low priority - Document but don't automate (P3)**
- This test only verifies the link works
- Full registration flow should have separate test cases
- Consider as part of smoke test for navigation
- Low risk: if broken, users will report immediately

---

### TC-LG-010: Social login buttons (P3 - Baja)

**Priority:** P3 (Low Priority)
**Type:** Functional / Integration
**Estimated Effort:** High

**Preconditions:**
- Social login options are available (Google, Facebook, GitHub, etc.)
- OAuth integration is configured
- Test accounts exist for social providers

**Steps:**
1. Navigate to login page
2. Click social login button (e.g., "Login with Google")
3. Follow social provider's authentication flow
4. Grant permissions if requested
5. Return to application

**Expected Result:**
- User is redirected to social provider's login page
- After successful authentication on provider:
  - User is redirected back to application
  - User is logged in
  - User profile is created/updated with social data
  - Session is created
  - User is redirected to dashboard

**Notes:**
- **Low priority - Document but don't automate (P3)**
- Very complex to automate (requires third-party auth flow)
- Manual testing is more practical
- Test each social provider separately
- Consider security: validate tokens, prevent CSRF
- May require special test accounts from providers

---

## Summary

**Total Test Cases:** 10
- **P1 (Alta):** 4 test cases
- **P2 (Media):** 3 test cases
- **P3 (Baja):** 3 test cases

### Recommended for Automation (P1)

These tests are critical path and MUST be automated:

1. **TC-LG-001:** Login with valid credentials
2. **TC-LG-002:** Login with invalid password
3. **TC-LG-003:** Login with empty fields
4. **TC-LG-004:** Account lockout after failed attempts

**Action:** Use `/new-screen login` command to create automated tests for these scenarios.

### Consider for Automation (P2)

These tests are important but can be automated after P1 tests:

5. **TC-LG-005:** Invalid email format
6. **TC-LG-006:** Password visibility toggle
7. **TC-LG-007:** Remember me functionality

**Action:** Add to `docs/LOGIN-P2-P3-TESTS.md` and implement when time permits.

### Document but Don't Automate (P3)

These tests are low priority and manual testing is sufficient:

8. **TC-LG-008:** Forgot password link (navigation only)
9. **TC-LG-009:** Create account link (navigation only)
10. **TC-LG-010:** Social login buttons (too complex for automation)

**Action:** Keep as documentation in `docs/LOGIN-P2-P3-TESTS.md` for reference.

---

## Next Steps

1. **Review with team**: Adjust priorities if needed, add missing scenarios
2. **Automate P1 tests**: Use `/new-screen login` command to create test automation
3. **Create P2/P3 documentation**: Move P2/P3 tests to `docs/LOGIN-P2-P3-TESTS.md`
4. **Run P1 tests regularly**: Include in CI/CD pipeline
5. **Revisit P2 tests**: Automate when priorities change or time permits

---

## Workflow Example

```bash
# 1. Generated this documentation
npm run ai:plan-tests http://localhost:3000/login login
# Output: docs/LOGIN-TEST-CASES.md

# 2. Review and prioritize with team
# (make adjustments as needed)

# 3. Automate P1 tests using /new-screen command
/new-screen login
# This will create:
# - utils/api/login-helper.ts
# - tests/login/login-p1.spec.ts (with TC-LG-001 to TC-LG-004)

# 4. Document P2/P3 tests
# Create docs/LOGIN-P2-P3-TESTS.md with TC-LG-005 to TC-LG-010
```

---

**This example demonstrates:**
- ✅ Comprehensive test scenario identification
- ✅ Realistic prioritization (not everything is P1)
- ✅ Clear test case structure with IDs
- ✅ Automation recommendations
- ✅ Next steps guidance
- ✅ Integration with existing commands (/new-screen)
